{
  "updatedAt": "2025-11-25T18:29:17.231Z",
  "createdAt": "2025-09-10T14:56:27.610Z",
  "id": "5Se0CY4jTtS5g7n3",
  "name": "company services",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "content": "Есть следующее описание сервисов компании ХХХ от пользователя. Кроме этого есть следующая дополнительная информация. Собери в таблицу следующей структуры информацию по каждому сервису: ",
        "height": 480,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -592,
        -432
      ],
      "id": "acc4e82e-412e-42a9-a4bd-37cfcefbf394",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "Romanychlogin",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_prompts",
          "mode": "list",
          "cachedResultName": "n8n_prompts",
          "cachedResultUrl": "https://github.com/Romanychlogin/n8n_prompts"
        },
        "filePath": "company_services.txt",
        "additionalParameters": {}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        -416,
        96
      ],
      "id": "20b12beb-1a52-48df-b940-2ffd4994f7e4",
      "name": "Get a file1",
      "webhookId": "87cb7d0c-6971-44f5-a103-a1ac454e96fe",
      "credentials": {
        "githubApi": {
          "id": "JQAFAcMNS9Ylyb0V",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -208,
        128
      ],
      "id": "45d05415-2f30-4487-b906-0614fd2f4ecf",
      "name": "Extract from File2"
    },
    {
      "parameters": {
        "jsCode": "// Function-Node (Run Once)\nconst workflowData = $getWorkflowStaticData('global');\nworkflowData.my_prompt = items[0].json;\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        48,
        128
      ],
      "id": "9e5d0c31-eff1-4c35-86d7-d2198770c331",
      "name": "Code3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/responses",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{$json}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1904,
        -192
      ],
      "id": "a2abd329-0d5f-4585-8e52-137fb63dc717",
      "name": "HTTP Request",
      "retryOnFail": true,
      "credentials": {
        "openAiApi": {
          "id": "m4NScyhZzV3hBcTr",
          "name": "OpenAi Yads"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return [{\n  json: \n {\n  \"model\": \"gpt-5\",\n  \"input\": [\n    {\n      \"role\": \"developer\",\n      \"content\": [\n        {\n          \"type\": \"input_text\",\n          \"text\": \"Отвечай только валидным JSON\"\n        }\n      ]\n    },\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"input_text\",\n          \"text\": $json.my_prompt\n        }\n      ]\n    }\n  ],\n  \"text\": {\n    \"format\": {\n      \"type\": \"json_schema\",\n      \"name\": \"service_listings\",\n      \"strict\": true,\n      \"schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"service_listing\": {\n            \"type\": \"array\",\n            \"description\": \"service_listing, each as a name, URL and description row.\",\n            \"items\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"service_name\": {\n                  \"type\": \"string\",\n                  \"description\": \"The name of the service\",\n                  \"minLength\": 1\n                },\n                \"service_url\": {\n                  \"type\": \"string\",\n                  \"description\": \"The root URL where the service is available\",\n                  \"minLength\": 1\n                }\n              },\n              \"required\": [\n                \"service_name\",\n                \"service_url\"\n              ],\n              \"additionalProperties\": false\n            }\n          }\n        },\n        \"required\": [\n          \"service_listing\"\n        ],\n        \"additionalProperties\": false\n      }\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"reasoning\": {\n    \"effort\": \"low\",\n    \"summary\": \"auto\"\n  },\n  \"tools\": [],\n  \"store\": false,\n  \"include\": [\n    \"reasoning.encrypted_content\",\n    \"web_search_call.action.sources\"\n  ]\n}\n\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1712,
        -208
      ],
      "id": "8d9261b7-57f6-4d96-90ae-4ae6b72dba86",
      "name": "Set API JSON"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2800,
        80
      ],
      "id": "52edc5a1-4572-45dd-b48c-fe8668a2ebb7",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "company_services",
          "mode": "list",
          "cachedResultName": "company_services"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "company_id": "={{ $json.company_id }}",
            "service_name": "={{ $json.service_name }}",
            "service_url": "={{ $json.service_url }}",
            "service_description": "={{ $json.service_description }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "service_id",
              "displayName": "service_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "service_name",
              "displayName": "service_name",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "service_url",
              "displayName": "service_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "service_description",
              "displayName": "service_description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "company_id",
              "displayName": "company_id",
              "required": true,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "updated_at",
              "displayName": "updated_at",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "dateTime",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        4352,
        160
      ],
      "id": "62a64ba7-b2d8-4b5e-99e7-6cffd28f874c",
      "name": "Insert rows in a table",
      "credentials": {
        "postgres": {
          "id": "Hx2VFmUi5WO2K4QX",
          "name": "Postgres account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Берём первый item из входных данных\nconst input = JSON.parse($json.output[1].content[0].text);\nconst company_id=$('When Executed by Another Workflow').first().json.company_id\n// Достаём массив competitors\nconst variants = input.service_listing;\n\n// Разворачиваем каждый объект в отдельный item\nreturn variants.map((c, index) => ({\n  json: {\n    service_name: c.service_name,\n    service_url: c.service_url    \n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2224,
        -32
      ],
      "id": "48224588-2811-489a-b615-3762e170d773",
      "name": "Parse JSON"
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -944,
        80
      ],
      "id": "e1bb5f44-7d7d-4a76-a14a-49a1127f66cd",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO business_processes_states (business_process_id, company_id,n8n_workflow_execution_id,n8n_workflow_root_execution_id, started)\nSELECT MAX(business_process_id), $2,$3,$4, NOW()\nFROM public.business_processes\nWHERE n8n_process_name = $1;",
        "options": {
          "queryReplacement": "=[{{$workflow.name}},{{$json.company_id}},{{$execution.id}},{{ $('When Executed by Another Workflow').item.json.root_execution_id }}]"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -688,
        80
      ],
      "id": "00dc5a94-3c5c-4d7b-8498-e369248111c6",
      "name": "Mark_workwlow_started",
      "credentials": {
        "postgres": {
          "id": "4YkdFJcdTgzo9hkz",
          "name": "PGvector"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "update business_processes_states set finished=NOW() where business_process_id=(select MAX(business_process_id) from business_processes where n8n_process_name=$1) and n8n_workflow_execution_id=$2",
        "options": {
          "queryReplacement": "=[{{$workflow.name}},{{$execution.id}}]"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        3552,
        -160
      ],
      "id": "6506b2bc-0455-4b8d-a494-7947c1fdd87c",
      "name": "Mark_workflow_completed",
      "executeOnce": true,
      "credentials": {
        "postgres": {
          "id": "4YkdFJcdTgzo9hkz",
          "name": "PGvector"
        }
      }
    },
    {
      "parameters": {
        "resource": "folder",
        "operation": "list",
        "filters": {}
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        528,
        -208
      ],
      "id": "bc158e70-af9c-4ee0-be4c-b86fb5034b48",
      "name": "List a folder",
      "credentials": {
        "dropboxApi": {
          "id": "KgtvFdGsueqNuB0Z",
          "name": "Dropbox account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1) Берём данные из глобального хранилища\nconst workflowData = $getWorkflowStaticData('global');\nconst my_prompt_raw = workflowData.my_prompt.data ;\n\n// 2) Берём данные из узла \"When Executed by Another Workflow\"\nconst src = $('When Executed by Another Workflow').first().json;\n\n// 3) Формируем my_prompt\nconst my_prompt = String(my_prompt_raw)\n  .replaceAll('{{ccompany_name}}', String(src.company_name ?? ''))\n  .replaceAll('{{services_list}}', String(src.services_description ?? ''));\n\n// 4) Берём первый входной item и дописываем поле\nconst item = $input.first();\nitem.json.my_prompt = my_prompt;\n\n// 5) Возвращаем массив элементов\nreturn [item];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1392,
        -128
      ],
      "id": "9b692ab7-941a-414a-8127-93630973a8d0",
      "name": "Set prompt"
    },
    {
      "parameters": {
        "content": "to add company_url analysis in prompt"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        912,
        -256
      ],
      "id": "f0f1f790-b0e2-496c-98ed-9b7af81237b3",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "update business_processes_states set steps_passed=$2, tokens_used=$3,tokens_used_type=$4 where n8n_workflow_execution_id=$1",
        "options": {
          "queryReplacement": "=[{{$execution.id}},{{$json.steps_passed}},{{$json.tokens_used}},{{ 'gpt-5' }}]"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        4752,
        128
      ],
      "id": "141a0bca-e21d-4acf-bfcc-3b96d11e0938",
      "name": "Mark_workflow_passed_steps",
      "executeOnce": true,
      "credentials": {
        "postgres": {
          "id": "4YkdFJcdTgzo9hkz",
          "name": "PGvector"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nconst workflowData = $getWorkflowStaticData('global');\nworkflowData.steps_passed = workflowData.steps_passed+1; // update steps counter\n//set used tokens here!!!!\nlet step_tokens_used = toNumber($('HTTP Request1').first().json.usage.total_tokens,0);\n //set used tokens here!!!!\nworkflowData.tokens_used += step_tokens_used;\n\nfor (const item of $input.all()) {\n  item.json.steps_passed = workflowData.steps_passed;\n  item.json.tokens_used = workflowData.tokens_used\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4528,
        128
      ],
      "id": "18e87029-f008-4df2-a7ea-e6af7def0e6f",
      "name": "Get current step and tokens saved"
    },
    {
      "parameters": {
        "errorMessage": "Process terminated by user"
      },
      "type": "n8n-nodes-base.stopAndError",
      "typeVersion": 1,
      "position": [
        5504,
        16
      ],
      "id": "7705ff83-9613-4400-b432-a3d8fbb96566",
      "name": "Stop and Error"
    },
    {
      "parameters": {
        "operation": "select",
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "business_processes_states",
          "mode": "list",
          "cachedResultName": "business_processes_states"
        },
        "returnAll": true,
        "where": {
          "values": [
            {
              "column": "n8n_workflow_execution_id",
              "value": "={{ $execution.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        5008,
        160
      ],
      "id": "46b21f50-e94b-4649-ad8e-0f3fa02af708",
      "name": "check if termination is requested",
      "credentials": {
        "postgres": {
          "id": "4YkdFJcdTgzo9hkz",
          "name": "PGvector"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fa13510a-3a56-4cd5-8b80-3e4fe626ce0b",
              "leftValue": "={{ $json.to_terminate }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5184,
        192
      ],
      "id": "3ef8876e-950c-439a-a9c1-b0f504058731",
      "name": "If1"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "update business_processes_states set steps_total=$3 where business_process_id=(select MAX(business_process_id) from business_processes where n8n_process_name=$1) and n8n_workflow_execution_id=$2",
        "options": {
          "queryReplacement": "=[{{$workflow.name}},{{$execution.id}},{{$input.all().length}}]"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2592,
        -240
      ],
      "id": "0d31e54c-d3dd-40ac-bc7b-45d4ef984acf",
      "name": "Mark_workflow_total_steps",
      "executeOnce": true,
      "credentials": {
        "postgres": {
          "id": "4YkdFJcdTgzo9hkz",
          "name": "PGvector"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Function-Node (Run Once)\nconst workflowData = $getWorkflowStaticData('global');\nworkflowData.steps_passed = 0;\nworkflowData.tokens_used = 0;\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2784,
        -272
      ],
      "id": "bd738d46-4a08-4265-8f9f-344e03385655",
      "name": "Init total counter"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "09752f3f-1379-46b7-8ab2-7df7b3934143",
              "leftValue": "={{ $('When Executed by Another Workflow').item.json.user_content_dropbox_folder}}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        288,
        160
      ],
      "id": "92ffbafe-8925-409b-9128-69e53f2a5f1d",
      "name": "If no content"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "resource": "folder",
        "operation": "list",
        "path": "={{ $('When Executed by Another Workflow').item.json.user_content_dropbox_folder }}",
        "returnAll": true,
        "filters": {}
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        496,
        256
      ],
      "id": "293315a0-8021-44c6-9c21-f17cc792b014",
      "name": "List a folder1",
      "credentials": {
        "dropboxOAuth2Api": {
          "id": "AugpA5e12rWISfZ5",
          "name": "Dropbox OAuth"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        736,
        176
      ],
      "id": "f5fed606-03d5-41ce-8c09-3d4ee1ee24ea",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "path": "={{ $json.pathDisplay }}"
      },
      "type": "n8n-nodes-base.dropbox",
      "typeVersion": 1,
      "position": [
        928,
        272
      ],
      "id": "20b31a58-9171-443c-ad4d-30c3dfb7442a",
      "name": "Download a file",
      "credentials": {
        "dropboxOAuth2Api": {
          "id": "AugpA5e12rWISfZ5",
          "name": "Dropbox OAuth"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.name }}",
                    "rightValue": ".txt",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "id": "d05a18fa-91ef-463f-af7b-80c4b63cfb29"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "txt"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6fefbbdf-1c9e-4225-ae36-0ef5af4d5ab4",
                    "leftValue": "={{ $json.name }}",
                    "rightValue": ".pdf",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pdf"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1168,
        288
      ],
      "id": "f0782227-ca8c-4c11-b0c6-6e4830980654",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "text",
        "destinationKey": "=data {{ $json.name }}",
        "options": {
          "keepSource": "json"
        }
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        1632,
        80
      ],
      "id": "0bd8919c-2010-42df-8b0f-af40724dbcc0",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {
          "keepSource": "json"
        }
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        1632,
        256
      ],
      "id": "fa83cccd-ca6e-4dfe-875c-0731c1e18e14",
      "name": "Extract from File3"
    },
    {
      "parameters": {
        "content": "Добавить анализ других файлов через AI"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1040,
        624
      ],
      "id": "c1b39af2-9d2f-4cf5-b97a-1583453be513",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "jsCode": "// Берём все входные элементы\nconst items = $input.all();\n\n// Имя файла из узла \"Switch\"\n// Аккуратно забираем имя файла из ноды \"Switch\"\n\n\nconst fileName = String($json.name).trim();\n\nlet filename_clear = fileName;\nlet extension = '';\nconst dotIndex = fileName.lastIndexOf('.');\nif (dotIndex !== -1) {\n  filename_clear  = fileName.slice(0, dotIndex);\n  extension = fileName.slice(dotIndex + 1);\n}\n\nconst root = $input.first().json;\nconst key  = 'data ' + filename_clear;\nconst contents =\n  root[key] && Object.prototype.hasOwnProperty.call(root[key], extension)\n    ? root[key][extension]\n    : undefined;\n// Если нечего добавлять — просто вернём текущее состояние\nconst block = contents.length ? `${filename_clear}\\n${contents}` : '';\n\n// Глобальное хранилище\nconst workflowData = $getWorkflowStaticData('global');\n\n// Инициализируем, если не было\nif (typeof workflowData.UserContent !== 'string') {\n  workflowData.UserContent = '';\n}\n\n// Дописываем по правилу: \\n + Название файла + \\n + содержимое\nif (block) {\n  workflowData.UserContent += (workflowData.UserContent ? '\\n' : '') + block;\n}\n\n// Можно вернуть текущее значение для отладки/передачи дальше\nreturn [\n  {\n    json: {\n      fileName,\n      appended: Boolean(block),\n      length: workflowData.UserContent.length,\n      preview_tail: workflowData.UserContent.slice(-500), // последние 500 символов для проверки\n      filename_clear\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2032,
        368
      ],
      "id": "d8823a8e-43da-41d2-821d-549400ca9ce9",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "content": "Разделить по этапам 1)идентифицируем сервисы и сохраняем 2)для каждого сервиса запрашиваем структуру сайта из внешнего сервиса\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2224,
        352
      ],
      "id": "f31e1cd7-5e91-4cd7-b758-8627f2ab6bcd",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/responses",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{$json}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3984,
        160
      ],
      "id": "8dd9d8eb-f8c4-443e-a4d1-d976f8805f0c",
      "name": "HTTP Request1",
      "retryOnFail": true,
      "credentials": {
        "openAiApi": {
          "id": "m4NScyhZzV3hBcTr",
          "name": "OpenAi Yads"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return [{\n  json: \n {\n  \"model\": \"gpt-5\",\n  \"input\": [\n    {\n      \"role\": \"developer\",\n      \"content\": [\n        {\n          \"type\": \"input_text\",\n          \"text\": \"Выводи только валидный JSON-массив объектов в формате: [{\\\"service_name\\\": string, \\\"service_url\\\": string, \\\"service_description\\\": string, \\\"service_description_with_url\\\": string}]. Не добавляй комментариев или форматирования вне этого массива.\\n\\n'''\\nФормат вывода:\\n- Массив объектов JSON.\\n- Каждый объект должен содержать поля:\\n  - \\\"service_name\\\": (обязательно, string) — название сервиса.\\n  - \\\"service_url\\\": (опционально, string) — адрес сервиса. \\n  - \\\"service_description\\\": (string) —полное описание сервиса. Если если описание не идентифицированино  - передай null\\n  - \\\"service_description_with_url\\\": (string) —полное описание сервиса включая ссылки на весь контент сервиса и услуги. Если если описание не идентифицированино  - передай null\"\n        }\n      ]\n    },\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"input_text\",\n          \"text\": $json.my_prompt\n        }\n      ]\n    }\n  ],\n  \"text\": {\n    \"format\": {\n      \"type\": \"json_schema\",\n      \"name\": \"service_listing\",\n      \"strict\": true,\n      \"schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"service\": {\n            \"type\": \"array\",\n            \"description\": \"service_listing, each as a name, URL and description row.\",\n            \"items\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"service_name\": {\n                  \"type\": \"string\",\n                  \"description\": \"The name of the service\",\n                  \"minLength\": 1\n                },\n                \"service_url\": {\n                  \"type\": \"string\",\n                  \"description\": \"The root URL where the service is available\",\n                  \"minLength\": 1\n                },\n                \"service_description\": {\n                  \"type\": \"string\",\n                  \"description\": \"Detailed description of the service\",\n                  \"minLength\": 1\n                },\n                \"service_description_with_url\": {\n                  \"type\": \"string\",\n                  \"description\": \"Detailed description of the service including urls\",\n                  \"minLength\": 1\n                }\n              },\n              \"required\": [\n                \"service_name\",\n                \"service_url\",\n                \"service_description\",\n                \"service_description_with_url\"\n              ],\n              \"additionalProperties\": false\n            }\n          }\n        },\n        \"required\": [\n          \"service\"\n        ],\n        \"additionalProperties\": false\n      }\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"reasoning\": {\n    \"effort\": \"high\",\n    \"summary\": \"auto\"\n  },\n  \"tools\": [\n    {\n      \"type\": \"web_search\",\n      \"user_location\": {\n        \"type\": \"approximate\"\n      },\n      \"search_context_size\": \"medium\",\n      \"filters\": {\n        \"allowed_domains\": [\n          JSON.stringify($('Call Get sitemap').last().json.urls)\n        ]\n      }\n    }\n  ],\n  \"store\": false,\n  \"include\": [\n    \"reasoning.encrypted_content\",\n    \"web_search_call.action.sources\"\n  ]\n}\n\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3808,
        160
      ],
      "id": "5cee08e4-34d6-4871-b2ce-2ca5dc82e82e",
      "name": "Set API JSON1"
    },
    {
      "parameters": {
        "jsCode": "const workflowData = $getWorkflowStaticData('global');\nlet my_prompt = workflowData.my_prompt.data;\n\nfor (const item of $input.all()) {\n  item.json.my_prompt = String(my_prompt)\n  .replaceAll('{{ccompany_name}}', $('When Executed by Another Workflow').first().json.company_name)\n  .replaceAll('{{service_description}}', JSON.stringify($('Loop Over Items').last().json))\n  .replaceAll('{{company_content}}', workflowData.UserContent);\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3648,
        160
      ],
      "id": "eedec487-dca0-40b7-8d70-3b1b8e3cd2e8",
      "name": "Set prompt1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a906ff8-159a-46c0-90a1-26c53d1db81a",
              "name": "baseUrl",
              "value": "={{$json.service_url}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3248,
        176
      ],
      "id": "22a38405-4970-4198-9158-869edd82b844",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4144,
        176
      ],
      "id": "96085421-d4c5-4af0-90dc-c96a027c56d8",
      "name": "Parse response"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "Romanychlogin",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_prompts",
          "mode": "list",
          "cachedResultName": "n8n_prompts",
          "cachedResultUrl": "https://github.com/Romanychlogin/n8n_prompts"
        },
        "filePath": "company_services_details.txt",
        "additionalParameters": {}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        -416,
        320
      ],
      "id": "bdf520e2-0d50-40b0-a667-7f85a393c61e",
      "name": "Get a file",
      "webhookId": "87cb7d0c-6971-44f5-a103-a1ac454e96fe",
      "credentials": {
        "githubApi": {
          "id": "JQAFAcMNS9Ylyb0V",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -208,
        352
      ],
      "id": "aa6a6776-2d5a-4040-8d86-f9489e1ed499",
      "name": "Extract from File4"
    },
    {
      "parameters": {
        "jsCode": "// Function-Node (Run Once)\nconst workflowData = $getWorkflowStaticData('global');\nworkflowData.my_prompt_details = items[0].json;\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        48,
        352
      ],
      "id": "89f06aa9-1fdd-496b-b665-8c3fa90b4353",
      "name": "Code"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "cMcY26oqQV5mNCvI",
          "mode": "list",
          "cachedResultUrl": "/workflow/cMcY26oqQV5mNCvI",
          "cachedResultName": "create content records for the  key word"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3216,
        -96
      ],
      "id": "4b2fff80-50f6-4209-9433-8af7c94517a9",
      "name": "Call 'create content records for the  key word'"
    },
    {
      "parameters": {
        "jsCode": "const workflowData = $getWorkflowStaticData('global');\n\n// Формируем выходной массив элементов\nconst items = [];\n\nitems.push({\n  json: {\n    key_word: workflowData.UserContent,\n    company_id: $('When Executed by Another Workflow').item.json.company_id,\n    report_id: 0,\n  },\n});\n\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2992,
        -96
      ],
      "id": "33d60465-75de-4acf-831b-3e05b23fba0c",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7FoU9Spu4KwNDAMk",
          "mode": "list",
          "cachedResultUrl": "/workflow/7FoU9Spu4KwNDAMk",
          "cachedResultName": "Get sitemap"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3456,
        176
      ],
      "id": "9a249ccf-9df4-401c-9c35-a96ea9237c8c",
      "name": "Call Get sitemap"
    }
  ],
  "connections": {
    "Get a file1": {
      "main": [
        [
          {
            "node": "Extract from File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File2": {
      "main": [
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "Get a file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set API JSON": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Parse JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table": {
      "main": [
        [
          {
            "node": "Get current step and tokens saved",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse JSON": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          },
          {
            "node": "Mark_workflow_total_steps",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Mark_workwlow_started",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mark_workwlow_started": {
      "main": [
        [
          {
            "node": "Get a file1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set prompt": {
      "main": [
        [
          {
            "node": "Set API JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mark_workflow_passed_steps": {
      "main": [
        [
          {
            "node": "check if termination is requested",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get current step and tokens saved": {
      "main": [
        [
          {
            "node": "Mark_workflow_passed_steps",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check if termination is requested": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Stop and Error",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mark_workflow_total_steps": {
      "main": [
        [
          {
            "node": "Init total counter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If no content": {
      "main": [
        [],
        [
          {
            "node": "List a folder1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "List a folder1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [
          {
            "node": "Set prompt",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Download a file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download a file": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract from File3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File3": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set API JSON1": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set prompt1": {
      "main": [
        [
          {
            "node": "Set API JSON1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Call Get sitemap",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Parse response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse response": {
      "main": [
        [
          {
            "node": "Insert rows in a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a file": {
      "main": [
        [
          {
            "node": "Extract from File4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File4": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "If no content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'create content records for the  key word'": {
      "main": [
        [
          {
            "node": "Mark_workflow_completed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Call 'create content records for the  key word'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call Get sitemap": {
      "main": [
        [
          {
            "node": "Set prompt1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "errorWorkflow": "v2Z32ISEUzsFYnZw"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "When Executed by Another Workflow": [
      {
        "json": {
          "id": "ezK8ihYnfxZNTIAc",
          "root_execution_id": 20076,
          "company_id": 2,
          "threshhold": "0.88",
          "company_name": "Первый визовый центр Курган",
          "services_description": "Визы:    http://krg45.visa-rf.ru/ АТЭС:    http://krg45.apec-first.ru/",
          "user_content_dropbox_folder": "/Test_content_folder_for_Kurgan"
        }
      }
    ],
    "HTTP Request": [
      {
        "json": {
          "id": "resp_08af8e1d3028d703016925e6e2f3408193828ee23b7ce1b6ad",
          "object": "response",
          "created_at": 1764091618,
          "status": "completed",
          "background": false,
          "billing": {
            "payer": "developer"
          },
          "error": null,
          "incomplete_details": null,
          "instructions": null,
          "max_output_tokens": null,
          "max_tool_calls": null,
          "model": "gpt-5-2025-08-07",
          "output": [
            {
              "id": "rs_08af8e1d3028d703016925e6e392288193a0ac35defb28863e",
              "type": "reasoning",
              "encrypted_content": "gAAAAABpJeboi3z0IyTAlWA9UNK7rrUaaAbwp8KyV4cnCw_TWrIKUNucz1nxSrQx6fP7kWk2U3Thn-noP9VSJKjOi6n3n8M5qdOFVjbPN2eSEmAwHR3Kiked0rAtElvPZsI7_NnfA0v84b-PNCzjU5i3zVUZRVu7SPZsK7aBLUllByQ57p0gXKLoBdGmK2NQJ6HI6pCYoaPyDDcqoXhXHwJa5nMji1feC9RUWw-g6pHgQQLxaD8ARJ9s_BTPB68ibI5npFrVLF_-fiKYtwnWn5yGwN6tb3vkcWal_yqJkz6POaBEp6DSEQf1af6Ff86fIzu5XAFIfYI0-Eo89qKUD80wNRuGdrIzm10pH4ITaMoGJq2ssNwBLJwXrrvIg5MPGP8it79RmXlNE2JVZ80p24XR8oA9EZ0ersi0CcROaUHPGEIsGzA1YgpUIN4OugE-dJvoXlnPmY_4qMbTeQwN2tPD8HzZgPBhemkNNjq4fGiAAMOa2mZyeOlDjjIpcgsBIaZnp3p2IepZYMw2kN6eSvvs44lIf8OiUDqbcoYet0_H4QoPkO0wbmO8IpGUu_TrkiNrkOwr80B6A3cyEc-ReiqOWw5ln1IqnoFzLtHZV2P2t8lntnR3USAV1de1vgQY1M4UE1p44jZSn8COx153N3ABoHDLAyPOMreRxrUM4mHgAbOwu97u6NUI8P-GCvgrnO4GGrrd4spLtWaZ8kLV0Mtt61YaM7xX341Ul8w4PWzw2RX7D9dcazwZzM0Hy-IOz4_W-38LTKeA8eJdO4iW5f1KavMzzcFnykmMRhIinYEa7Cs9OZ6050SnMlNpdMLA-DP-_eAbXmnFLfpYAX8Lp_AWMkHjWM2kA9-3Gt-zrAn3d9kOOKVzcTLzbgqYjMhwhLxN1TY1WpEGZEsgPMh6Zc_sTgMmela89E9qwBEkMWV2lKJH-IIUglbDZzMv2_ceUFlRUo5acAFghxS1PQezKYhJgtp7RvlznSnDzE5ZMIfbD7DpKj69KnX9VLChqYMBlXpT3GJZfOtC4qvYjSxhCNiwlVWHJcMLZAiX6U9ELNQMNE23DE_-56jff0WekpUHdNiyiIdEapDjnqZ3bLxSfKQrwryOOnRFuYeo_VTHGGO3RSf00uowafzitc2_SZg6tioNSRNHdRFV-OwDK-zefcZ7iUKlfHmDLD6g1noyg2qvgGay-3N5tcuPD8iQchXOFgVt_ilHEtAaCZYPzmiPGO7sWLc-JSTPS_rz8mDA3Wrk5vx5AQmse5D3QFAuIeyIGZbDU0d3uV4UHWiuok7S8_oZn_KhD2CoVP2peJb2wkWRW1rPQgEwhAU8YRyv4Pfqu24R0oB9ec3qOkmyx_tLaNuI_5dqJfkTfDqX0gNWC16XXxZxh3V1my1QPfmXxPNe6XEb8JnRejd4Su0PzyQu4gp1Ia7wjINP8zdDSglGx6k4L5-FTOiq2GZCIZG8kW5QD8CtaHXfnn6VCRXmCJ-hLTIIeY0R-EWuAeyZ23fkYlD0ialKDGGnz_Fzj1MPkHBH94INCEsFtYThDYph4MscpGs1nW8PsT4US2PERVKbos6L1GFgvp8CvzMaKWdLNkgdzaWn6rT5gWpFMsAEXmTriYQZrbcHtYsZhWQ9LyJdmJdfVWUCQqO1yoqiq1fRbi4HHviXc8QNsFQ06ViiBDUttKv53gK3MN9KEBmEkXpwOa5WGbXGf0Lwab1Isx_CB0V0C1z8QydIX1-5W3uIds7rRwx1kJQdRwvpAaB5UtyKGDUP13yCflwnGcyZsMcFdHmFnoePpd7bFAjyIjor4FdUz5FoNY3OpOTCYJMkX92vndrRSD4sllmFVxYfoTBPMBjNMokOEtbboiKV42JGTNgzymzYOGp7TtBXcFWBQ_twdGMIUZPZ2EbWQtM4jqVwiqf8tuvLNWuwQF9goIY0eCfT0bM_wHhOKu6rxWFBSgkj_JEGsHqEKYWd2eZcEwGJtnuRW2KsD0LEs3v4CRrd0A_OQgt-q_d0ReGPA7CSYkqBFbpIHi4VNoAk7RjlZVXB8KSyPeTzJBviIS8wpYE6iFjy2zmt54yZrtHFWwlaLlWsN_X3SCZhLOoYBcriXo_bikrL4yLk-VZ9hWMSWWP0NmaFkpWEolt88WTf72k_HV_3wRcUPlRzwj4gGAlWV9kQUmt0_FZY4FmZcVni4brglNvnsAG5VYW0ZbXok_IMS_aRkOnq2HNZyFQKqVcz1iYG6a0wX9XtOUZ7gChBiRdbEVx1555K0Jtnkg71_geqkwhCcJSR3QgN-AC0a3DAe82euwOz6m8SznWBli0V7BkkbmFmLHHiCiGhMlD_zjgrx6SLrJZP_rTFpjYoTMLwScTC1g3S8GLCcpF0EVuG7kt1JBaP2hynQgalWwe9Vw==",
              "summary": []
            },
            {
              "id": "msg_08af8e1d3028d703016925e6e835a881938cb1f61907f7e83e",
              "type": "message",
              "status": "completed",
              "content": [
                {
                  "type": "output_text",
                  "annotations": [],
                  "logprobs": [],
                  "text": "{\"service_listing\":[{\"service_name\":\"Визы\",\"service_url\":\"http://krg45.visa-rf.ru/\"},{\"service_name\":\"АТЭС\",\"service_url\":\"http://krg45.apec-first.ru/\"}]}"
                }
              ],
              "role": "assistant"
            }
          ],
          "parallel_tool_calls": true,
          "previous_response_id": null,
          "prompt_cache_key": null,
          "prompt_cache_retention": null,
          "reasoning": {
            "effort": "low",
            "summary": "detailed"
          },
          "safety_identifier": null,
          "service_tier": "default",
          "store": false,
          "temperature": 1,
          "text": {
            "format": {
              "type": "json_schema",
              "description": null,
              "name": "service_listings",
              "schema": {
                "type": "object",
                "properties": {
                  "service_listing": {
                    "type": "array",
                    "description": "service_listing, each as a name, URL and description row.",
                    "items": {
                      "type": "object",
                      "properties": {
                        "service_name": {
                          "type": "string",
                          "description": "The name of the service",
                          "minLength": 1
                        },
                        "service_url": {
                          "type": "string",
                          "description": "The root URL where the service is available",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "service_name",
                        "service_url"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "service_listing"
                ],
                "additionalProperties": false
              },
              "strict": true
            },
            "verbosity": "medium"
          },
          "tool_choice": "auto",
          "tools": [],
          "top_logprobs": 0,
          "top_p": 1,
          "truncation": "disabled",
          "usage": {
            "input_tokens": 253,
            "input_tokens_details": {
              "cached_tokens": 0
            },
            "output_tokens": 250,
            "output_tokens_details": {
              "reasoning_tokens": 192
            },
            "total_tokens": 503
          },
          "user": null,
          "metadata": {}
        }
      }
    ]
  },
  "versionId": "8547d63d-9763-434f-9259-bd177c5adfda",
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-09-10T14:56:27.610Z",
      "createdAt": "2025-09-10T14:56:27.610Z",
      "role": "workflow:owner",
      "workflowId": "5Se0CY4jTtS5g7n3",
      "projectId": "spKmbJLU4mvACXIB"
    }
  ],
  "tags": [
    {
      "updatedAt": "2025-10-17T09:03:18.269Z",
      "createdAt": "2025-10-17T09:03:18.269Z",
      "id": "S7zerj1h6Ro25pTA",
      "name": "client creation"
    }
  ]
}